<!-- templates/index.html -->
{% extends "bootstrap/base.html" %} {% block title %}Home{% endblock %} {% block
head %} {{ super() }}
<!-- Google Fonts -->
<link
  href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap"
  rel="stylesheet"
/>

<!-- Custom CSS -->
<link
  rel="stylesheet"
  type="text/css"
  href="{{ url_for('static', filename='css/style.css') }}"
/>
{% endblock %} {% block navbar %}
<nav class="navbar navbar-expand-lg navbar-light bg-light">
  <a class="navbar-brand logo-img" href="#">Teshkileh</a>
  <button
    class="navbar-toggler"
    type="button"
    data-toggle="collapse"
    data-target="#navbarNav"
    aria-controls="navbarNav"
    aria-expanded="false"
    aria-label="Toggle navigation"
  >
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="navbarNav">
    <ul class="navbar-nav mr-auto">
      <li class="nav-item active">
        <a class="nav-link" href="{{ url_for('index') }}">Home</a>
      </li>
    </ul>
    {% if current_user.is_authenticated %}
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link" href="{{ url_for('logout') }}">Logout</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="{{ url_for('add_item') }}">Add Item</a>
      </li>
    </ul>
    {% else %}
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link" href="{{ url_for('login') }}">Login</a>
      </li>
    </ul>
    {% endif %}
  </div>
</nav>
<div class="container mt-4">
  <form
    action="{{ url_for('index') }}"
    method="GET"
    class="form-inline justify-content-end mb-2"
  >
    <input
      type="text"
      name="search"
      class="form-control mr-sm-2"
      placeholder="Search by Item Name"
    />
    <button
      type="submit"
      class="btn btn-outline-primary my-2 my-sm-0 search-btn"
    >
      Search
    </button>
  </form>

  <div class="row">
    {% for item in items %}
    <div class="col-md-4 mb-4">
      <div class="card">
        <img
          src="data:image/jpeg;base64,{{ b64encode(item.image).decode('utf-8') }}"
          class="card-img-top card-img-custom"
          alt="Item Image"
          style="max-height: 200px"
        />
        <div class="card-body">
          <h5 class="card-title">{{ item.title }}</h5>
          <p class="card-text">Category: {{ item.category }}</p>
          <p class="card-text">Quantity: {{ item.quantity }}</p>
          <p class="card-text">Price: ${{ item.price }}</p>
          {% if current_user.is_authenticated %}
          <a
            href="{{ url_for('edit_item', item_id=item.id) }}"
            class="btn btn-primary btn-sm"
            >Edit</a
          >
          <form
            action="{{ url_for('delete_item', item_id=item.id) }}"
            method="post"
            style="display: inline-block"
          >
            <button type="submit" class="btn btn-danger btn-sm">Delete</button>
          </form>
          {% endif %}
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
</div>
{% endblock %}
